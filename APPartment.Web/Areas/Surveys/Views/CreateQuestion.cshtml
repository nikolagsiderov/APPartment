@{
    Layout = null;
}

@{
    var surveyID = ViewData["SurveyID"].ToString();
}

@await Html.PartialAsync("_Loader")

<h5>Add question to survey</h5>

<div class="form-group">
    <input id="surveyQuestion" class="form-control form-control-sm" placeholder="Write down question..." />
</div>

<br />

<div>
    <button type='button' class='btn btn-secondary' id="cancel-postQuestion" data-dismiss='modal'>Cancel</button>
    <button type="button" id="postQuestion" class='no-underline btn btn-primary'>Add question</button>
</div>

<script>
    $(document).ready(function () {
        $('#postQuestion').on("click", function () {
            $('#loading').fadeIn();
            var question = $('#surveyQuestion').val();
            $(this).css("pointer-events", "none");
            $('#cancel-postAssign').css("pointer-events", "none");

            $.ajax({
                type: 'POST',
                url: baseApplicationPath + `Surveys/Surveys/CreateQuestion`,
                data: { surveyID: @surveyID, question: question },
                success: function () {
                    $('#loading').fadeOut();
                    window.location.reload();
                },
                error: function (req, status, error) {
                    alert(error);
                }
            });
        });
    });
</script>